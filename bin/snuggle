#!/usr/bin/env node

var snuggle = require('../lib/snuggle'),
    fs = require('fs'),
    logger = require('logger'),
    program = require('commander');

program
    .version('0.0.1')
    .option('-v, --verbose', 'Show more output', false)
    .parse(process.argv);

var staticConfigPath = program.args[0] || 'snuggle.conf.json';

if (program.verbose) {
    snuggle.logger.setLevel('debug');
}

fs.readFile(staticConfigPath, function(staticConfigErr, staticConfigJson){
    if (staticConfigErr) { throw staticConfigErr; }
    snuggle.main(JSON.parse(staticConfigJson), logger);
});
